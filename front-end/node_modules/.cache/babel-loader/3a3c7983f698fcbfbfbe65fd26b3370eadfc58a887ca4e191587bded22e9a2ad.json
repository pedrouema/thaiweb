{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Chart from 'chart.js/auto';\nimport axios from 'axios';\nexport default {\n  name: 'AnalisesGanhos',\n  data() {\n    return {\n      URL: \"http://localhost:4000\",\n      ganhos: [],\n      saidas: [],\n      entradas: [],\n      meses: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],\n      mesesUsar: [],\n      mesAtual: '',\n      diaAtual: '',\n      anoAtual: '',\n      dataAtual: '',\n      mesAno: '',\n      diaDaSemana: ''\n    };\n  },\n  methods: {\n    alimentarDadosGanhos() {\n      let valor = 0;\n      console.log(valor);\n      for (let i = 0; i < 7; i++) {\n        console.log(valor);\n        valor = this.entradas[i] - this.saidas[i];\n        this.ganhos.push(valor);\n        console.log(valor);\n      }\n      console.log(this.ganhos);\n    },\n    alimentarDadosEntrada() {\n      let valor;\n      let mes = parseFloat(this.mesAtual);\n      let ano = parseFloat(this.anoAtual);\n      for (let i = 6; i >= 0; i--) {\n        axios.get(`${this.URL}/getvalorentradames/${mes}/${ano}`).then(response => {\n          valor = response.data[0].sum;\n          if (valor == null) valor = 0;\n          this.entradas[i] = valor;\n          this.alimentarDadosGanhos();\n        }).catch(error => {\n          console.log(error);\n        });\n        mes--;\n        if (mes == 0) {\n          mes = 12;\n          ano--;\n        }\n      }\n    },\n    alimentarDadosSaida() {\n      let valor;\n      let mes = parseFloat(this.mesAtual);\n      let ano = parseFloat(this.anoAtual);\n      for (let i = 6; i >= 0; i--) {\n        axios.get(`${this.URL}/getvalorsaidames/${mes}/${ano}`).then(response => {\n          valor = response.data[0].sum;\n          if (valor == null) valor = 0;\n          this.saidas[i] = valor;\n          this.alimentarDadosEntrada();\n        }).catch(error => {\n          console.log(error);\n        });\n        mes--;\n        if (mes == 0) {\n          mes = 12;\n          ano--;\n        }\n      }\n    },\n    filtraMeses() {\n      let mes = this.mesAtual - 1;\n      for (let i = 0; i < 7; i++) {\n        if (mes == -1) mes = this.meses.length - 1;\n        this.mesesUsar.push(this.meses[mes]);\n        mes--;\n      }\n      let aux = [];\n      for (let i = this.mesesUsar.length - 1; i >= 0; i--) aux.push(this.mesesUsar[i]);\n      this.mesesUsar = aux;\n    },\n    pegarDataAtual() {\n      const data = new Date();\n      const dia = String(data.getDate()).padStart(2, '0');\n      const mes = String(data.getMonth() + 1).padStart(2, '0');\n      const ano = String(data.getFullYear());\n      const atual = `${dia}/${mes}/${ano}`;\n      this.mesAtual = mes;\n      this.diaAtual = dia;\n      this.anoAtual = ano;\n      this.dataAtual = atual;\n      this.mesAno = mes + '-' + ano;\n      this.diaDaSemana = data.toLocaleString('pt-BR', {\n        weekday: 'long'\n      });\n    }\n  },\n  mounted() {\n    this.pegarDataAtual();\n    this.filtraMeses();\n    this.alimentarDadosSaida();\n    this.alimentarDadosEntrada();\n    //this.alimentarDadosGanhos();\n    const data = {\n      labels: this.mesesUsar,\n      datasets: [{\n        label: 'Ganho Livre',\n        data: this.ganhos,\n        //MUDAR PARA LISTA DE GANHOS\n        backgroundColor: ['rgba(255, 99, 132, 0.2)', 'rgba(255, 159, 64, 0.2)', 'rgba(255, 205, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(201, 203, 207, 0.2)'],\n        borderColor: ['rgb(255, 99, 132)', 'rgb(255, 159, 64)', 'rgb(255, 205, 86)', 'rgb(75, 192, 192)', 'rgb(54, 162, 235)', 'rgb(153, 102, 255)', 'rgb(201, 203, 207)'],\n        borderWidth: 1\n      }]\n    };\n    const config = {\n      type: 'bar',\n      data: data,\n      options: {\n        layout: {\n          padding: {\n            left: 20,\n            right: 20,\n            top: 20,\n            bottom: 20\n          }\n        },\n        legend: {\n          display: false,\n          position: 'bottom'\n        },\n        title: {\n          display: true,\n          text: 'Sales by Months',\n          fontSize: 20\n        },\n        scales: {\n          y: {\n            beginAtZero: true\n          }\n        }\n      }\n    };\n    const ctx = document.getElementById('myChartGanhos');\n    const myChartGanhos = new Chart(ctx, config);\n    myChartGanhos;\n  }\n};","map":{"version":3,"names":["Chart","axios","name","data","URL","ganhos","saidas","entradas","meses","mesesUsar","mesAtual","diaAtual","anoAtual","dataAtual","mesAno","diaDaSemana","methods","alimentarDadosGanhos","valor","console","log","i","push","alimentarDadosEntrada","mes","parseFloat","ano","get","then","response","sum","catch","error","alimentarDadosSaida","filtraMeses","length","aux","pegarDataAtual","Date","dia","String","getDate","padStart","getMonth","getFullYear","atual","toLocaleString","weekday","mounted","labels","datasets","label","backgroundColor","borderColor","borderWidth","config","type","options","layout","padding","left","right","top","bottom","legend","display","position","title","text","fontSize","scales","y","beginAtZero","ctx","document","getElementById","myChartGanhos"],"sources":["C:\\Users\\Pedro Uema\\Desktop\\thaiweb\\front-end\\src\\components\\analises\\analisesGanhos.vue"],"sourcesContent":["<template>\r\n    <h2>Ganhos dos ultimos meses</h2>\r\n    <div style=\"position: relative; height: 45vh; width: 80vw\">\r\n        <canvas id=\"myChartGanhos\"></canvas>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Chart from 'chart.js/auto';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    name: 'AnalisesGanhos',\r\n    data(){\r\n        return {\r\n            URL: \"http://localhost:4000\",\r\n            ganhos: [],\r\n            saidas: [],\r\n            entradas: [],\r\n            meses: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],\r\n            mesesUsar: [],\r\n            mesAtual: '',\r\n            diaAtual: '',\r\n            anoAtual: '',\r\n            dataAtual: '',\r\n            mesAno: '',\r\n            diaDaSemana: '',\r\n        }\r\n    },\r\n    methods: {\r\n        alimentarDadosGanhos(){\r\n            let valor = 0\r\n            console.log(valor);\r\n            for(let i = 0; i < 7; i++)\r\n            {\r\n                console.log(valor);\r\n                valor = (this.entradas[i] - this.saidas[i])\r\n                this.ganhos.push(valor)\r\n                console.log(valor);\r\n            }\r\n            console.log(this.ganhos);\r\n        },\r\n        alimentarDadosEntrada(){\r\n            let valor\r\n            let mes = parseFloat(this.mesAtual)\r\n            let ano = parseFloat(this.anoAtual)\r\n            for(let i = 6; i >= 0; i--)\r\n            {\r\n                axios.get(`${this.URL}/getvalorentradames/${mes}/${ano}`).then(response => {\r\n                    valor = response.data[0].sum;\r\n                    if(valor == null)\r\n                        valor = 0;\r\n                    this.entradas[i] = valor\r\n                    this.alimentarDadosGanhos();\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                })\r\n                mes--;\r\n                if(mes == 0)\r\n                {\r\n                    mes = 12;\r\n                    ano--;\r\n                }\r\n            }\r\n        },\r\n        alimentarDadosSaida(){\r\n            let valor\r\n            let mes = parseFloat(this.mesAtual)\r\n            let ano = parseFloat(this.anoAtual)\r\n            for(let i = 6; i >= 0; i--)\r\n            {\r\n                axios.get(`${this.URL}/getvalorsaidames/${mes}/${ano}`).then(response => {\r\n                    valor = response.data[0].sum;\r\n                    if(valor == null)\r\n                        valor = 0;\r\n                    this.saidas[i] = valor\r\n                    this.alimentarDadosEntrada();\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                })\r\n                mes--;\r\n                if(mes == 0)\r\n                {\r\n                    mes = 12;\r\n                    ano--;\r\n                }\r\n            }\r\n        },\r\n        filtraMeses(){\r\n            let mes = this.mesAtual-1\r\n            for(let i = 0; i < 7; i++)\r\n            {\r\n                if(mes == -1)\r\n                    mes = this.meses.length - 1\r\n                this.mesesUsar.push(this.meses[mes])\r\n                mes--;\r\n            }\r\n            let aux = [];\r\n            for(let i = this.mesesUsar.length - 1; i >= 0; i--)\r\n                aux.push(this.mesesUsar[i])\r\n            this.mesesUsar = aux;\r\n        },\r\n        pegarDataAtual() {\r\n            const data = new Date()\r\n            const dia = String(data.getDate()).padStart(2, '0')\r\n            const mes = String(data.getMonth() + 1).padStart(2, '0')\r\n            const ano = String(data.getFullYear())\r\n            const atual = `${dia}/${mes}/${ano}`\r\n            this.mesAtual = mes\r\n            this.diaAtual = dia\r\n            this.anoAtual = ano\r\n            this.dataAtual = atual\r\n            this.mesAno = mes+'-'+ano\r\n            this.diaDaSemana = data.toLocaleString('pt-BR', {weekday: 'long'})\r\n        },\r\n    },\r\n    mounted() {\r\n        this.pegarDataAtual();\r\n        this.filtraMeses();\r\n        this.alimentarDadosSaida();\r\n        this.alimentarDadosEntrada();\r\n        //this.alimentarDadosGanhos();\r\n        const data = {\r\n        labels: this.mesesUsar,\r\n        datasets: [{\r\n            label: 'Ganho Livre',\r\n            data: this.ganhos, //MUDAR PARA LISTA DE GANHOS\r\n            backgroundColor: [\r\n            'rgba(255, 99, 132, 0.2)',\r\n            'rgba(255, 159, 64, 0.2)',\r\n            'rgba(255, 205, 86, 0.2)',\r\n            'rgba(75, 192, 192, 0.2)',\r\n            'rgba(54, 162, 235, 0.2)',\r\n            'rgba(153, 102, 255, 0.2)',\r\n            'rgba(201, 203, 207, 0.2)'\r\n            ],\r\n            borderColor: [\r\n            'rgb(255, 99, 132)',\r\n            'rgb(255, 159, 64)',\r\n            'rgb(255, 205, 86)',\r\n            'rgb(75, 192, 192)',\r\n            'rgb(54, 162, 235)',\r\n            'rgb(153, 102, 255)',\r\n            'rgb(201, 203, 207)'\r\n            ],\r\n            borderWidth: 1\r\n        }]\r\n        };\r\n\r\n        const config = {\r\n            type: 'bar',\r\n            data: data,\r\n            options: {\r\n                layout : {\r\n                    padding : {\r\n                        left : 20,\r\n                        right : 20,\r\n                        top : 20,\r\n                        bottom : 20\r\n                    }\r\n                },\r\n                legend : {\r\n                    display : false,\r\n                    position : 'bottom'\r\n                },\r\n                title : {\r\n                    display : true,\r\n                    text : 'Sales by Months',\r\n                    fontSize : 20\r\n                },\r\n                scales: {\r\n                    y: {\r\n                        beginAtZero: true\r\n                    }\r\n                }\r\n            },\r\n        };\r\n\r\n        const ctx = document.getElementById('myChartGanhos');\r\n        const myChartGanhos = new Chart(ctx, config);\r\n        myChartGanhos;\r\n    }\r\n}\r\n</script>\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}